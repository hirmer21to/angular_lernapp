<h2>Components</h2>
<div class="language-ts">
<div *ngIf="praxis" style="margin-top: 20px;" class="ui info message">
  <h5>User Story</h5>
  <p>As a <strong>user</strong><br />
    I want to <strong>display a lecture</strong>, <br />
    to <strong> see its details</strong>.</p>
</div>
<div *ngIf="theoryLarge" style="margin-bottom: 20px;" class="ui message">
  <h4>What are Components?</h4>
  <p>A component controls a specific part of the screen. In the HTML file you define the structure of a component and
    the CSS
    styles
    this structure, together it's the view of the component. The TypeScript file is the logic part of the component. An
    Angular application is basically an application with a tree structure. It has a root, that is the
    <code class="language-ts">AppComponent</code> and it's also the entry point of the application. However,
    there is no difference to
    the other components in concept or syntax. Only difference is that the Angular framework knows that this component
    is the entry point of the application. If you have the root component you can put other components inside. You can
    interlace the components more and more. This is the most important architecture-concept of Angular.</p>
  <p>Components consist of three parts. A class with the <code class="language-ts"
     >@Component</code>-decorator which makes it a component,
    the template and the CSS styles (optional). With the template of a component you define what the user sees at
    runtime. In addition you can define the user interaction. The template is written in HTML and additional syntax
    elements like data-binding.</p>
  <p><img class="ui image big centered" src="assets/img/Components-1.png"></p>
</div>

<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Generate new Component</h4>
  <p>Open your command line in Visual Studio Code and generate (short form <code
     >g</code>) your "where-to-go"
    component. It's going to be the page you see
    first when you start the app.</p>
  <pre class="language-bash command-line" data-user="user" data-host="localhost"><code>ng g component where-to-go</code></pre>
</div>
<div *ngIf="theorySmall" style="margin-top: 20px;" class="ui message">
  <p>Result:</p>
  <p><img class="ui image centered" style="height: 65px" src="assets/img/Create-Three-Files.png"></p>
  <p>When you add a new component the app.module.ts automatically imports your new component. The CLI creates three
    files in one folder for you.
    It's the skeleton for your component. The HTML file is nearly
    empty and ready for your code. You can ignore the spec.ts file, it defines a unit test for the component.
    The .ts file is for your TypeScript code and defines the components logic.
  </p>
</div>
<div *ngIf="theoryLarge" style="margin-top: 20px;" class="ui message">
  <p><img class="ui image medium centered" src="assets/img/Skeleton-Component.png"></p>
  <p>There are some interesting things about the skeleton of the component.ts files. <code
     >@Component</code> is a
    decorator function which specifies the Angular metadata for the component. The CLI generates three metadata
    properties:</p>
  <ul>
    <li><code>selector</code>: the CSS-element-selector of the component </li>
    <li><code>templateURL</code>: the location of the components' template file</li>
    <li><code>styles</code>: the location of the private CSS style of the component
      (here empty, because we decided to
      import the semantic-ui for a overall style and thereforee we generated the project without a CSS for every
      component)
    </li>
  </ul>
  <p>The <code>selector</code> 'app-where-to-go' matches with the name of the HTML
    element. This name identifies the
    component within the template of the parent-component.</p>
  <p><code>ngOnInit</code> is a lifecycle hook function. Angular calls this function
    shortly after creating the
    component. It is the right function to place initialisation logic.</p>
  <p>The components' class always needs to be exported, to reuse it anywhere else e.g. in the AppModule.</p>
</div>
<div *ngIf="theoryLarge" style="margin-top: 20px;" class="ui message">
  <h4>Lifecycle of a Component</h4>
  <p>Every component has a lifecycle that is managed by Angular. Angular creates the component and renders the component
    and its children. Angular also checks if the databounded properties change and destroys the component before
    removing it from
    the DOM. The Angular Framework provides lifecycle hooks for the programers which give an insight into these specific
    moments of the app and also make them able to act at occurrence.</p>
  <p><img class="ui image large centered" src="assets/img/Lifecycle.png"></p>
  <p>The constructor is not Angular specific, but important when considering the lifecycle of a component since it is
    responsible for the instantiation of the component. You shouldn't put much logic into the constructor because when
    the
    constructor is called, neither input- / output-bindings are available nor the child-components.</p>
  <p><code>ngOnInit</code> offers you the possibility to initialise your component. It
    is guaranteed that all bindings
    are ready. It offers you the possibility to run all the initialisation logic you have, for example to request
    the data from the backend. <code>ngOnInit</code> isn't just a function, Angular
    has a TypeScript interface
    <code>OnInit</code>. The framework has its own interface for all lifecycle-hooks.
  </p>
  <p><code>ngOnChanges</code> is called one time before <code
     >ngOnInit</code> and after that every time an
    <code>Input</code> binding changes.
  </p>
  <p>With <code>ngAfterContentInit</code> you can react to the initialisation of
    child-components.</p>
  <p>The view of the child-components is accessable with the <code
     >ngAfterViewInit</code>.</p>
  <p>You can do some cleaning with <code>ngOnDestroy</code> before a component will be
    destroyed. This might be
    necessary if a component asks a service or other components for updates frequently.</p>
  <p>With the methods <code>ngAfterContentChecked</code> and <code
     >ngAfterViewChecked</code> you can monitor the
    Angular ChangeDetection. This mechanism is responsible for redrawing the components after changes. While the
    checked-flag that every component has is false, Angular checks to see if the component needs to be redrawn. The
    performance of the application will be better the less the ChangeDetection runs and with the methods you can control
    this.</p>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Reuse a Component</h4>
  <p>We can now use the <code>selector</code></p>
  <pre class="language-html"><code>&lt;app-where-to-go&gt;&lt;&#47;app-where-to-go&gt;</code></pre>

  <p>and insert it into the <strong>app.component.html</strong>. Now the app shows the component at this location, just like it
    would do with every other HTML tag.</p>
</div>
<div *ngIf="theoryLarge" style="margin-top: 20px;" class="ui message">
  <h4>Communication between Logic and View</h4>
  <p>As we already learned every component consists of two parts, logic (means component.ts) and view (means
    component.html). To ensure a communication between these two we can use different types of bindings.</p>
  <ol>
    <li>Property Binding: <br />they allow you to set the value of a DOM property based on an expression.
      You assign them with square brackets.<br />
      <code class="language-html">&lt;element [property]="expression"&gt;...&lt;/element&gt;</code>
    </li>
    <li>Interpolation: <br />
      helps to display properties of the component or calculated values as strings in the HTML view.<br />
      <code class="language-html"
       >&lt;div&gt;<span>{{</span> component-property <span>}}</span>&lt;/div&gt;</code>
    </li>
    <li>Event Binding: <br />
      this is kind of the opposite of property binding. It's possible to react to the occurrence of DOM events, e.g. in
      order to change the application model.<br />
      <code class="language-html">&lt;element (eventname)="action"&gt;...&lt;/element&gt;</code>

    </li>
    <li>Two-Way Binding: <br />
      use this if you want to bind an input-component directly to a value of your component class.<br />
      <code class="language-html">&lt;input [(ngModel)]="text"&gt;...&lt;/input&gt;</code><br />
      It's a combination of two bindings and you could write the expanded form too.<br />
      <code class="language-html"
       >&lt;input [ngModel]="text" (ngModelChange)="setOtherText($event)"&gt;...&lt;/input&gt;</code>
    </li>
    <li>Local Template-Variables: <br />
      you can create a local variable. With this you have now access to the whole DOM-API of the input field.<br />
      <code class="language-html">&lt;element #myElement&gt;...&lt;/element&gt;<br/>
        </code>
    </li>
  </ol>
  <br /><a href="https://stackblitz.com/edit/practice-part-1?embed=1&file=src/app/app.component.ts&hideNavigation=1"
    target="_blank">Click here to try it!</a>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Create and show Property</h4>
  <p>Now we will use data-binding to show a temporary text message on the "Home" page until we are ready to show the
    information about the next lecture we have to go to. Put this property into <strong>where-to-go.component.ts</strong>:</p>

    <pre><code>tempText: string = "Here will appear your information soon!";</code></pre>

  <p>and replace the auto generated code in the <strong>where-to-go.component.html</strong> with this code:</p>
  <pre><code>&lt;p&gt;<span>{{</span> tempText <span>}}&lt;&#47;p&gt;</span></code></pre>

  <p>This kind of data-binding is called interpolation and you just displayed the value of the property "tempText" via
    your
    HTML code.</p>
  <p class="ui info message">Interpolation: Shows data in the template. Syntax: <br />
    <code><span>{{</span> &nbsp; <span>}}</span></code>
  </p>

  <h4>Visualization of the Construction:</h4>
  <p><img class="ui image large centered" src="assets/img/App-Building-2.png"></p>
  <h4>Create Class</h4>
  <p>For our project we are going to need a class to define a lecture. With this code you can generate a TypeScript
    class in a new folder named "shared":</p>
    <pre class="command-line language-bash" data-host="localhost" data-user="user"><code>ng g class shared/lecture</code></pre>

  <p>In this new class we define the constructor for lecture.</p>

<pre><code>constructor(
  public id: number,
  public name: string,
  public room: string,
  public day: string,
  public time: Time,
  public building: string,
  public floor: string,
  public department?: string) &#123;
&#125;</code></pre>

  <p>The property department is optional in this constructor and therefore marked with a <code
     >?</code>. Angular has its
    own type for time. Usually Visual Studio Code should ask you right away if you want to import it.</p>
  <p><img class="ui image large centered" src="assets/img/Import-Time.png"></p>
  <p>If not, you can force it by placing the curser behind the underlined word and press STRG + space bar, or do it on
    your own like this:</p>

  <pre><code>import &#123; Time &#125; from "@angular/common";</code></pre>

  <h4>Generate Item Component</h4>
  <p>We want to show a complete lecture now, so we generate the component lecture-item.</p>
  <pre class="command-line language-bash" data-user="user" data-host="localhost"><code>ng g component lecture-item</code></pre>

  <p>We create a lecture inside the class LectureItemComponent in <strong>lecture-item.component.ts</strong> first and define all the properties the constructor
    requires.</p>

    <pre><code>lecture: Lecture = &#123;
  id: 1,
  name: 'Webtechnologien',
  room: '075',
  day: 'Monday',
  time: &#123;hours: 10, minutes: 15&#125;,
  building: 'WE5',
  floor: '02',
  department: 'Lehrstuhl für Medieninformatik'
&#125;</code></pre>

  <p>Of course we also need to import the class <code>Lecture</code>.</p>
  <pre><code>import &#123; Lecture &#125; from "../shared/lecture";</code></pre>

  <p>And in the <strong>lecture-item.component.html</strong> we can define what of this item we want to display and how we want to
    display it. We
    use the interpolation to display the properties of the component-class in this HTML-template.</p>

  <pre><code>&lt;div style="padding: 50px;"&gt;
  &lt;div class="ui middle aligned divided list"&gt;
    &lt;div class="item"&gt;
      &lt;div class="content"&gt;
        &lt;h2 style="padding-bottom: 20px" class="header ui"&gt;
            Lecture Details:&lt;&#47;h2&gt;
        &lt;div class="header"&gt;What? <span>{{</span>lecture.name <span>}}</span>&lt;&#47;div&gt;
        &lt;div class="description"&gt;Where? <span>{{</span>lecture.building<span>}}</span>&#47;
            <span>{{</span>lecture.floor<span>}}</span>.<span>{{</span>lecture.room<span>}}</span>&lt;&#47;div&gt;
        &lt;div class="description"&gt;When? <span>{{</span>lecture.day<span>}}</span>, 
            <span>{{</span>lecture.time.hours<span>}}</span>:<span>{{</span>lecture.time.minutes<span>}}</span>&lt;&#47;div&gt;
        &lt;div *ngIf="lecture.department" class="description"&gt;
            Department: <span>{{</span>lecture.department<span>}}</span>&lt;&#47;div&gt;
      &lt;&#47;div&gt;
    &lt;&#47;div&gt;
  &lt;&#47;div&gt;
&lt;&#47;div&gt;</code></pre>
  <p>To show it beneath the title and the where-to-go component we insert</p>

    <pre class="language-html"><code>&lt;app-lecture-item&gt;&lt;/app-lecture-item&gt;</code></pre>
  <p>into the <strong>app.component.html</strong>.</p>
</div>

<div *ngIf="theoryLarge" style="margin-top: 20px;" class="ui message">
  <h4>Pipes</h4>
  <p>In every application you will get data which you will transform and present to the user. This data could be
    a simple local string variable, but also much more. You could display the data as raw values or you could
    format them to achieve a better user experience. Angular comes along with many build-in pipes. With pipes you can
    format strings, numbers and other displayed data.
    Additionally it is possible to create your own pipes. In this case we are fine with the build-in pipes. For example
    you can format the date of today.
    <br>When you instantiate a <code>Date</code> object
    like this: <br />
    <code>today: Date = new Date();</code> <br />
    and you display your date just "raw" in your HTML code like this:<br />
    <code><span>{{</span>today<span>}}</span></code>,<br />
    you will see this date-format:<br> {{today}}
  </p>
  <p>Probably users want to have another format for a date. So you can use pipes in your HTML to format the date like
    this:</p>
  <p>Code: <code><span>{{</span>today | date<span>}}</span></code> - Result:
    {{today | date}}</p>
  <p>Code: <code><span>{{</span>today | date: 'medium'<span>}}</span></code> - Result:
    {{today | date: 'medium'}}</p>
  <p>Code: <code><span>{{</span>today | date: 'fullDate'<span>}}</span></code> - Result:
    {{today | date: 'fullDate'}}</p>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Try a Pipe</h4>
  <p>We want to try the UppercasePipe, which formats our string in capital letters:</p>


  <pre class="language-html"><code>&lt;div class="header"&gt;What? <span>{{</span> lecture.name | uppercase <span>}}</span>&lt;&#47;div&gt;</code></pre>

</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Visualization of the Construction:</h4>
  <p><img class="ui image large centered" src="assets/img/App-Building-3.png"></p>
  <div class="ui success message">
    <h4>Summary</h4>
    <ul>
      <li>With the Angular CLI you generated other components and a class.</li>
      <li>You displayed the new components by adding them to the application shell <code
         >AppComponent</code>.</li>
      <li>You learned about components, their lifecycle, bindings and pipes.</li>
      <li>You used interpolation to show text in the template.</li>
      <li>You used your knowledge about pipes and applied the <code
         >UppercasePipe</code>.</li>
    </ul>
  </div>
  <iframe style="margin-top:20px; margin-bottom:20px; width:100%; height: 500px"
    src="https://stackblitz.com/edit/where-to-go-step-2?embed=1&file=src/app/app.component.ts&hideNavigation=1"></iframe>

  <div class="ui center aligned segment" style="width: 50%; margin: 0 auto">
    <h4>Your Progress:</h4>
    <mat-progress-bar style="margin-bottom:20px;" mode="determinate" value="20"></mat-progress-bar>
  </div>
</div>
</div>