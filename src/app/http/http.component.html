<h2>HTTP</h2>
<div *ngIf="praxis" style="margin-top: 20px;" class="ui info message">
  <h5>User Story</h5>
  <p>As an <b>user</b><br />
    I want to <b>add, change and delete lectures</b>, <br />
    to <b> keep my timetable up to date</b>.</p>
</div>
<div *ngIf="theoryLarge" style="margin-bottom: 20px;" class="ui message">
  <h4>Http</h4>
  <p>
    Most front-end applications interact with the backend over HTTP protocol. In fact, every application loads data at
    runtime. Different patterns can be used. Angular uses the RxJS-Framework, that is based on the observable pattern.
    The Angular class <code style="font-family:'Consolas';">Http</code> implements this pattern and provides a
    interface, where you can load data
    asynchonous.
  </p>
  <p>Often web-applications use REST-server. They use http methods to define actions, e.g. what action should the server
    run for the specific resource.</p>
  <ul>
    <li>GET: is used to request a ressource from the server, e.g. a list with items</li>
    <li>POST: to add a new resource or update an existing one, e.g. adds or updates an item of that list</li>
    <li>PUT: replaces an existing resource, e.g. replaces one item or one list with another item or list</li>
    <li>DELETE: deletes a resource by the sent id</li>
  </ul>
  <p>The term "resource" refers to a single data object of a REST server. The path of the request tells the
    server which resource to do an action on. For example can you make a request for a list with the path
    <code style="font-family:'Consolas';">/list</code> and the method <code style="font-family:'Consolas';">GET</code>.
    And with the path <code style="font-family:'Consolas';">/list/1234</code> you could request the
    list-item 1234.</p>
  <h4>Observables</h4>
  <p>Reactive programming is a programming paradigma. It is about data streams. As an example calculation tables in MS
    Excel can be used. It is not about Excel, it is about the table. If you have cells in the table connected by a
    formula and you change a value in a connected cell, the outcome of the formula will be updated automatically.
    Angular supports reactive programming with the RxJS-Framework. Observables are the main construct of the RxJS
    library. Observables represent a data stream supplied by a source. They have the following tasks:</p>
  <ul>
    <li>Generate data</li>
    <li>Allow the use of operators, to manipulate data</li>
    <li>Release storage, if data stream is no longer needed</li>
  </ul>
  <p> <code style="font-family:'Consolas';">subscribe</code>-method: it is used to listen and react to signals of the
    observable. The signature could
    look like this:
    <code style="font-family:'Consolas';">obs.subscribe((data) => &#123;...&#125;);</code></p>
  <p><code style="font-family:'Consolas';">pipe</code>-method: chains the operators of observables. The method gets null
    or more operators and returns
    an observable.
    The data of the returned observable have the same type as they have in the last operator</p>
  <ul>
    <li><code style="font-family:'Consolas';">map</code>-operator: gets an observable internally, gives the data of the
      observable to the transformation
      function,
      gets the return value and puts it in an observable. This new observable is forwarded to the next operator</li>
    <li><code style="font-family:'Consolas';">mapTo</code>-operator: forwards a static value</li>
    <li><code style="font-family:'Consolas';">tap</code>-operator: is used for side-effects. Can be used to print the
      data stream on the console, or to
      save data from the server in a property</li>
    <li><code style="font-family:'Consolas';">catchError</code>-operator: is compareable to the <code
        style="font-family:'Consolas';">catch</code> of a <code style="font-family:'Consolas';">try/catch</code>-block.
      It
      gets an error, handles the error and returns a new observable or a new error-observable for the next
      <code style="font-family:'Consolas';">catchError</code>-operator</li>
    <li><code style="font-family:'Consolas';">of</code>-operator: creates a new observable from a static value</li>
    <li><code style="font-family:'Consolas';">throwError</code>-operator: creates a new error-observable. It is similar
      to the <code style="font-family:'Consolas';">throw</code>
      command</li>
  </ul>
  <h4>Http-Module</h4>
  <p>The http-module contains three Angular modules: <code
      style="font-family:'Consolas';"> HttpClientModule, HttpClientJsonpModule</code> and
    <code style="font-family:'Consolas';">HttpClientXsrfModule</code>. The most important classes of the http-module
    are:</p>
  <ul>
    <li><code style="font-family:'Consolas';">HttpHeaders</code>: helps you to define and manipulate the http-headers of
      a server request</li>
    <li><code style="font-family:'Consolas';">HttpParams</code>: helps you to define and manipulate the request
      parameter of a server request</li>
    <li><code style="font-family:'Consolas';">HttpRequest</code>: represents server requests. An instance of this class
      contains URL and http-headers
      for
      the request. You do not assign instances of this class, Angular will do this internally.</li>
    <li><code style="font-family:'Consolas';">HttpResponse</code>: represents an answer from the server. It contains for
      example the status the server
      has for the request and the data the server sends.</li>
    <li><code style="font-family:'Consolas';">HttpErrorResponse</code>: represents an error-answer from the server. The
      answer of the server fails when
      the connection fails, an exception is in your code or the server status code is bigger or equals 400.
    </li>
  </ul>
  <p>We will work with the <code style="font-family:'Consolas';">HttpClientModule</code>. It provieds the <code
      style="font-family:'Consolas';">HttpClient</code> service. All methods
    of the <code style="font-family:'Consolas';">HttpClient</code> service return observables and use json data. The use
    of json data means that Angular
    serializes and deserializes the data for you.</p>
</div>
<h4>Using a Data Server</h4>
<div *ngIf="theorySmall" style="margin-bottom: 20px;" class="ui message">
  <p>The service class should get the data now with HTTP requests. We want to add functions:</p>
  <ul>
    <li><b>C</b>reate for adding new lectures</li>
    <li><b>R</b>ead (we already have that)</li>
    <li><b>U</b>pdate for changing a lecture item</li>
    <li><b>D</b>elete for deleting a lecture item or all of them</li>
  </ul>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <p>Import this in <b>app.module.ts</b>:</p>
 
  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> HttpClientModule </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;@angular/common/http&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p>And add it to the <code style="font-family:'Consolas';">imports</code> array:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">imports</span><span style="color:#008000;">: </span><span style="color:#008000;">[
  </span><span style="color:#ffffff;">  ...</span><span style="color:#b16565;">,
  </span><span style="color:#ffffff;">  HttpClientModule
</span><span style="color:#008000;">]</span><span style="color:#b16565;">, </span></pre>
  </div>
  <p>The In-Memory Web API Module will be used. It imitates the communication with a remote data server. First install
    the npm package and generate the InMemoryData-Service:</p>
  <p class="ui message black"> <code style="font-family:'Consolas';">npm install angular-in-memory-web-api --save</code>
  </p>
  <p class="ui message black"> <code style="font-family:'Consolas';">ng g service shared/InMemoryData</code></p>
  <p>Import to <b>app.module.ts</b>:</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> HttpClientInMemoryWebApiModule </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;angular-in-memory-web-api&#39;<span style="color:#b16565;">; </span>
</span><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> InMemoryDataService </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;./shared/in-memory-data.service&#39;</span><span style="color:#b16565;">; </span></pre>
  </div>
  <p>And you also need to add it to the <code style="font-family:'Consolas';">imports</code> array:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">imports</span><span style="color:#008000;">: </span><span style="color:#008000;">[
  </span><span style="color:#ffffff;">  ...</span><span style="color:#b16565;">,
  </span><span style="color:#ffffff;">  HttpClientModule</span><span style="color:#b16565;">,
  </span><span style="color:#ffffff;">  HttpClientInMemoryWebApiModule.forRoot</span><span style="color:#b16565;">(
  </span><span style="color:#ffffff;">  InMemoryDataService</span><span style="color:#b16565;">,
    </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> dataEncapsulation</span><span style="color:#008000;">: </span><span style="color:#359aff;">false </span><span style="color:#b16565;">&#125;)
</span><span style="color:#008000;">]</span><span style="color:#b16565;">,</span></pre>

  </div>
  <p>If you have this problem, don't worry, we will fix it now.
  </p>
  <img style="margin-bottom:15px;" class="ui centered large image" src="assets/img/InMemoryData-Error.png">
  <p>The class <code style="font-family:'Consolas';"><b>InMemoryDataService</b></code> needs to implement <code
      style="font-family:'Consolas';">InMemoryDbService</code> and the
    property
    <code style="font-family:'Consolas';">createDb</code> is missing.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">export </span><span style="color:#359aff;">class</span><span style="color:#ffffff;"> InMemoryDataService </span><span style="color:#359aff;">implements</span><span style="color:#ffffff;"> InMemoryDbService </span><span style="color:#b16565;">&#123;
  </span><span style="color:#ffffff;">  createDb</span><span style="color:#b16565;">() </span><span style="color:#b16565;">&#123;
      </span><span style="color:#359aff;">const</span><span style="color:#ffffff;"> lectures </span><span style="color:#008000;">= </span><span style="color:#008000;">[]</span><span style="color:#b16565;">;
      </span><span style="color:#359aff;">return </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;">lectures</span><span style="color:#b16565;">&#125;;
    </span><span style="color:#b16565;">&#125;
&#125;</span></pre>
  </div>
  <p>Therefor you need to import:</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> InMemoryDbService </span><span style="color:#b16565;">&#125; </span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;angular-in-memory-web-api&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p>Now we need to fill the <code style="font-family:'Consolas';">const lectures</code> with the data we have in <code
      style="font-family:'Consolas';">mock-lectures.ts</code>.</p>
  <p>To be sure every new lecture will have an unique id we add the method <code
      style="font-family:'Consolas';">genId()</code>. If the array is
    empty the initial id 11 will be used, otherwise the highste id + 1 will be used.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">genId</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lectures</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#008000;">[]</span><span style="color:#b16565;">)</span><span style="color:#008000;">: </span><span style="color:#ff8000;">number </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return</span><span style="color:#ffffff;"> lectures.</span><span style="color:#ff8000;">length </span><span style="color:#008000;">&gt; </span><span style="color:#00ff40;">0 </span><span style="color:#008000;">? </span><span style="color:#ff4848;">Math</span><span style="color:#ffffff;">.</span><span style="color:#ff8000;">max</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">...lectures
  .map</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture </span><span style="color:#008000;">=&gt;</span><span style="color:#ffffff;"> lecture.</span><span style="color:#ff8000;">id</span><span style="color:#b16565;">)) </span><span style="color:#008000;">+ </span><span style="color:#00ff40;">1 </span><span style="color:#008000;">: </span><span style="color:#00ff40;">11</span><span style="color:#b16565;">;
&#125;</span></pre>
  </div>
  <p>Of course we also need to import the class <code style="font-family:'Consolas';">Lecture</code>.</p>
  <div class="ui message black">
    <pre
    style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> Lecture </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;./lecture&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>

  <h4>Update the Getter</h4>
  <p>To get the data from the remote server now, we need to update the getter-methods for the lecture array and the
    single lecture item. First we define in <b>lecture.service.ts</b> the <code
      style="font-family:'Consolas';">lectureUrl</code> of the form
    <code style="font-family:'Consolas';">:base/:collectionName</code> with the address of the lecture resource on the
    server. Here base is the
    resource to which requests are made, and <code style="font-family:'Consolas';">collectionName</code> is the lectures
    data object in the
    in-memory-data-service.ts.</p>
  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">private</span><span style="color:#ffffff;"> lectureUrl </span><span style="color:#008000;">= </span><span style="color:#ffff80;">&#39;api/lectures&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p>Injection into the constructor:</p>
  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ff8000;">constructor</span><span style="color:#b16565;">( </span><span style="color:#359aff;">private</span><span style="color:#ffffff;"> http</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> HttpClient </span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123; </span><span style="color:#b16565;">&#125;</span></pre>
  </div>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> HttpClient </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;@angular/common/http&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p>And now change the getter:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">getLectures</span><span style="color:#b16565;">()</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;Lecture</span><span style="color:#008000;">[]&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.</span><span style="color:#ff8000;">get</span><span style="color:#ffffff;">&lt;Lecture</span><span style="color:#008000;">[]&gt;</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">)
&#125; </span></pre>
  </div>
</div>
<div *ngIf="theorySmall" style="margin-top: 20px;" class="ui message">
  <p>All HttpClient methods return a RxJS-Observable of something. HTTP is a request / response protocol. Every time
    you make a request you will get a single response. </p>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <p>There might go something wrong with the data of the remote
    server sometimes, that's why <code style="font-family:'Consolas';">getLectures()</code> should catch an error and do
    something appropriate with it.
    So we need a method for that:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">private</span><span style="color:#ffffff;"> handleError&lt;T&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">operation </span><span style="color:#008000;">= </span><span style="color:#ffff80;">&#39;operation&#39;</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> result</span><span style="color:#008000;">?:</span><span style="color:#ffffff;"> T</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">error</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> any</span><span style="color:#b16565;">)</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;T&gt; </span><span style="color:#008000;">=&gt; </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">   console.</span><span style="color:#ff8000;">log</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">operation </span><span style="color:#008000;">+ </span><span style="color:#ffff80;">&#39; failed: &#39; </span><span style="color:#008000;">+</span><span style="color:#ffffff;"> error</span><span style="color:#b16565;">);
    </span><span style="color:#359aff;">return</span><span style="color:#ffffff;"> of </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">result as T</span><span style="color:#b16565;">);
  </span><span style="color:#b16565;">&#125;
&#125;</span></pre>
  </div>
  <p>If something goes wrong now the error will be logged on the console. In addition the method will return a safe
    value, that will keep the application running. The next step is to import <code
      style="font-family:'Consolas';">catchError</code> and add it to the
    get method.</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> catchError</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> map</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> tap </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;rxjs/operators&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">getLectures</span><span style="color:#b16565;">()</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;Lecture</span><span style="color:#008000;">[]&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.</span><span style="color:#ff8000;">get</span><span style="color:#ffffff;">&lt;Lecture</span><span style="color:#008000;">[]&gt;</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .pipe</span><span style="color:#b16565;">(
</span><span style="color:#ffffff;">   catchError</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.handleError</span><span style="color:#b16565;">(</span><span style="color:#ffff80;">&#39;getLectures&#39;</span><span style="color:#b16565;">, </span><span style="color:#008000;">[]</span><span style="color:#b16565;">))
  </span><span style="color:#b16565;">);
&#125;</span></pre>
  </div>
  <p class="ui info message"><code style="font-family:'Consolas';">get</code>
    <br />Retrieve information.
  </p>

  <p>We also need to change the getter method for the single lecture:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">getLecture</span><span style="color:#b16565;">(</span><span style="color:#ff8000;">id</span><span style="color:#008000;">: </span><span style="color:#ff8000;">number</span><span style="color:#b16565;">)</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;Lecture&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">const</span><span style="color:#ffffff;"> url </span><span style="color:#008000;">=</span><span style="color:#ffffff;"> `$</span><span style="color:#b16565;">&#123;</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">&#125;</span><span style="color:#008000;">/$</span><span style="color:#b16565;">&#123;</span><span style="color:#ff8000;">id</span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;">`</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.</span><span style="color:#ff8000;">get</span><span style="color:#ffffff;">&lt;Lecture&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">url</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .pipe</span><span style="color:#b16565;">(
</span><span style="color:#ffffff;">   catchError</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.handleError&lt;Lecture&gt;
    </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">`getLecture </span><span style="color:#ff8000;">id</span><span style="color:#008000;">=$</span><span style="color:#b16565;">&#123;</span><span style="color:#ff8000;">id</span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;">`</span><span style="color:#b16565;">))
  </span><span style="color:#b16565;">);
&#125;</span></pre>
  </div>
  <p>The <code style="font-family:'Consolas';">const url</code> is defined as :baseURL/:id so that the url is returned
    with ID and is retrieved from
    the
    server with <code style="font-family:'Consolas';">http.get()</code>.</p>
  <p>With these steps the class mock-lectures.ts is useless now. You are safe to delete the class and also its import
    to lecture.service.ts.</p>
  <h4>Change Lecture Details</h4>
  <p>We want to be able to change something in the details of a lecture. In the detail view we can display our lecture
    in a form, but we need to write the changes on the server, if we want to have them permanent. We need to prepare a
    function in <b>lecture.service.ts</b>.</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> HttpHeaders </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;@angular/common/http&#39;</span><span style="color:#b16565;">;

</span><span style="color:#359aff;">const</span><span style="color:#ffffff;"> httpOptions </span><span style="color:#008000;">= </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">headers</span><span style="color:#008000;">: </span><span style="color:#008000;">new</span><span style="color:#ffffff;"> HttpHeaders </span><span style="color:#b16565;">(&#123; </span><span style="color:#ffff80;">&#39;Content-Type&#39;</span><span style="color:#008000;">: </span><span style="color:#ffff80;">&#39;application/json&#39;</span><span style="color:#b16565;">&#125;) </span><span style="color:#b16565;">&#125;</span></pre>
  </div>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">updateLecture</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#b16565;">)</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;any&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.put</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> lecture</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> httpOptions</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .pipe</span><span style="color:#b16565;">(
</span><span style="color:#ffffff;">   catchError</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.handleError&lt;any&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffff80;">&#39;updateLecture&#39;</span><span style="color:#b16565;">))
  </span><span style="color:#b16565;">);
&#125;</span></pre>
  </div>
  <p class="ui info message"><code style="font-family:'Consolas';">put</code>
    <br />Store an entity at a URI. PUT can create a new entity or update an existing one.
  </p>
</div>
<div *ngIf="theorySmall" style="margin-top: 20px;" class="ui message">
  <p>The method <code style="font-family:'Consolas';">HttpClient.put()</code> needs three parameters: </p>
  <ul>
    <li>URL: the url has not changed. The Web-API knows what lecture to update, because of the ID</li>
    <li>the data that should be updated</li>
    <li>options: the Web-API expects a special header in the storage requirements of HTTP. This header is in the
      LectureService as the constant <code style="font-family:'Consolas';">httpOptions</code> defined.</li>
  </ul>
</div>

<div *ngIf="praxis" style="margin-top: 20px;">
  <p>Use the method from the service now to write a <code style="font-family:'Consolas';">save()</code> method in
    <b>lecture-details.component.ts</b>.
  </p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">save</span><span style="color:#b16565;">()</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureService.updateLecture</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lecture</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .subscribe</span><span style="color:#b16565;">(() </span><span style="color:#008000;">=&gt; </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.goBack</span><span style="color:#b16565;">());
&#125; </span></pre>
  </div>
  <p>Afterwards you can add the button in <b>lecture-details.component.hmtl</b> with the click-event-binding and check
    if all input fields are filled.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;button </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui primary button&quot; (click)</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;save()&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Save</span><span style="color:#359aff;">&lt;/button&gt;
&lt;p </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;color:red&quot; *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;!lecture.name || !lecture.room ||
    !lecture.day || !lecture.time.hours || !lecture.time.minutes 
    || !lecture.building || !lecture.floor&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Please check again, 
    if you filled all input fields correctly!</span><span style="color:#359aff;">&lt;/p&gt; </span></pre>
  </div>
</div>

<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Add a new Lecture</h4>
  <p>First we need a new component for the input form:</p>
  <p class="ui message black"><code style="font-family:'Consolas';">ng g component lecture-add</code></p>
  <p>Afterwards we copy the input form from lecture-details.component.html and make the neccessary changes.</p>
  <p>Everytime you see something like <code style="font-family:'Consolas';">[(ngModel)]="lecture.name"</code> replace it
    with something like
    <code style="font-family:'Consolas';">#lectureName</code>.</p>
  <p class="ui info message">
    Element Reference: Direct access to a DOM-element. Creates a local variable something that provides access to the
    element instance in data-binding and event-binding expressions in the current template. Syntnax:<br />
    <code style="font-family:'Consolas';">#something</code>
  </p>
  <p>All of them should look like this example: </p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;input</span><span style="color:#ffffff;"> #lectureName </span><span style="color:#ff4848;">placeholder=</span><span style="color:#ffffff;">&quot;Name&quot; </span><span style="color:#359aff;">/&gt;</span></pre>
  </div>
  <p><b>Important:</b> Delete the <code style="font-family:'Consolas';">*ngIf="lecture"</code> at the beginning!
    Otherwise this component will not
    display anything.</p>
  <p>Call the button below "Add" and delete the function, we need to write one first.
  </p>
  <p>In a next step add the component to the routing and to the navigation:</p>
  <p><b>app-routing.module.ts</b></p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> LectureAddComponent </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;./lecture-add/lecture-add.component&#39;</span><span style="color:#b16565;">;

</span><span style="color:#359aff;">const</span><span style="color:#ffffff;"> routes</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Routes </span><span style="color:#008000;">= </span><span style="color:#008000;">[
</span><span style="color:#ffffff;">  ...
  </span><span style="color:#b16565;">&#123; </span><span style="color:#ff00ff;">path</span><span style="color:#008000;">: </span><span style="color:#ffff80;">&#39;lecture-add&#39;</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> component</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> LectureAddComponent </span><span style="color:#b16565;">&#125;
</span><span style="color:#008000;">]</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p><b>app.component.html</b></p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui three item menu&quot;</span><span style="color:#359aff;">&gt;
</span><span style="color:#ffffff;">  ...
  </span><span style="color:#359aff;">&lt;a </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;item&quot; routerLink</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;/lecture-add&quot; routerLinkActive</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;active&quot;</span><span style="color:#359aff;">&gt;
</span><span style="color:#ffffff;">    Add
  </span><span style="color:#359aff;">&lt;/a&gt;
&lt;/div&gt;</span></pre>
  </div>
  <p>There are also some things we can take over from the details component and the timetable and insert it into
    <b>lecture-add.component.ts</b>,
    that it looks like this:</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> LectureService </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;../shared/lecture.service&#39;</span><span style="color:#b16565;">;
</span><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> Lecture </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;../shared/lecture&#39;</span><span style="color:#b16565;">;
</span><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> Location </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;@angular/common&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">export </span><span style="color:#359aff;">class</span><span style="color:#ffffff;"> LectureAddComponent </span><span style="color:#359aff;">implements</span><span style="color:#ffffff;"> OnInit </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">  lectures</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#008000;">[]</span><span style="color:#b16565;">;

  </span><span style="color:#ff8000;">constructor</span><span style="color:#b16565;">(
    </span><span style="color:#359aff;">private</span><span style="color:#ffffff;"> lectureService</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> LectureService</span><span style="color:#b16565;">,
    </span><span style="color:#359aff;">private </span><span style="color:#ff8000;">location</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Location
  </span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123; </span><span style="color:#b16565;">&#125;

</span><span style="color:#ffffff;">  ngOnInit</span><span style="color:#b16565;">() </span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.getLectures</span><span style="color:#b16565;">();
  </span><span style="color:#b16565;">&#125;

</span><span style="color:#ffffff;">  getLectures</span><span style="color:#b16565;">()</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureService.getLectures</span><span style="color:#b16565;">()
</span><span style="color:#ffffff;">    .subscribe</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lectures </span><span style="color:#008000;">=&gt; </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures </span><span style="color:#008000;">=</span><span style="color:#ffffff;"> lectures</span><span style="color:#b16565;">);
  </span><span style="color:#b16565;">&#125;

</span><span style="color:#ffffff;">  goBack</span><span style="color:#b16565;">()</span><span style="color:#008000;">: </span><span style="color:#359aff;">void</span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.</span><span style="color:#ff8000;">location</span><span style="color:#ffffff;">.</span><span style="color:#ff8000;">back</span><span style="color:#b16565;">();
  </span><span style="color:#b16565;">&#125;

&#125;</span></pre>
  </div>
  <p>Write the <code style="font-family:'Consolas';">addLecture</code> method in the <b>lecture.service.ts</b> now:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">addLecture</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#b16565;">)</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;Lecture&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.post&lt;Lecture&gt;</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> lecture</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> httpOptions</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .pipe</span><span style="color:#b16565;">(
</span><span style="color:#ffffff;">    catchError</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.handleError&lt;Lecture&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffff80;">&#39;addLecture&#39;</span><span style="color:#b16565;">))
  </span><span style="color:#b16565;">);
&#125;</span></pre>
  </div>
  <p class="ui info message"><code style="font-family:'Consolas';">post</code>
    <br />Request that the resource at the URI do something with the provided entity. Often POST is used to create a
    new entity, but it can also be used to update an entity.
  </p>
  <p>We can use it again in the <b>lecture-add.component.ts</b>:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">add</span><span style="color:#b16565;">( </span><span style="color:#ffffff;">name</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> building</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">,
</span><span style="color:#ffffff;">floor</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> room</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> day</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> hours</span><span style="color:#008000;">: </span><span style="color:#ffffff;">number</span><span style="color:#ffffff;">, 
minutes</span><span style="color:#008000;">: </span><span style="color:#ffffff;">number</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> department</span><span style="color:#008000;">?:</span><span style="color:#ffffff;"> string</span><span style="color:#b16565;">)</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">  let time </span><span style="color:#008000;">= </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;">hours</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> minutes</span><span style="color:#b16565;">&#125;;
  </span><span style="color:#359aff;">if</span><span style="color:#b16565;">(</span><span style="color:#008000;">!</span><span style="color:#ffffff;">name </span><span style="color:#008000;">|| </span><span style="color:#008000;">!</span><span style="color:#ffffff;">room </span><span style="color:#008000;">|| </span><span style="color:#008000;">!</span><span style="color:#ffffff;">day </span><span style="color:#008000;">|| </span><span style="color:#008000;">!</span><span style="color:#ffffff;">time </span><span style="color:#008000;">|| </span><span style="color:#008000;">!</span><span style="color:#ffffff;">building </span><span style="color:#008000;">|| </span><span style="color:#008000;">!</span><span style="color:#ffffff;">floor </span><span style="color:#b16565;">)&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.fieldsEmpty</span><span style="color:#008000;">=</span><span style="color:#359aff;">true</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">return</span><span style="color:#b16565;">; </span><span style="color:#b16565;">&#125;
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureService.addLecture</span><span style="color:#b16565;">(&#123; </span><span style="color:#ffffff;">name</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> building</span><span style="color:#b16565;">, </span><span style="color:#ffffff;">floor</span><span style="color:#b16565;">, 
    room</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> day</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> time</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> department</span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> as Lecture</span><span style="color:#b16565;">)
</span><span style="color:#ffffff;">  .subscribe</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture </span><span style="color:#008000;">=&gt; </span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures.</span><span style="color:#ff8000;">push</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#b16565;">);
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.goBack</span><span style="color:#b16565;">();
  </span><span style="color:#b16565;">&#125;);
&#125;</span></pre>
  </div>
  <p>We will get name, room and the other values from the form we have in the HTML. We will combine minutes and hours
    to a time object, because <code style="font-family:'Consolas';">Lecture</code> expects a <code
      style="font-family:'Consolas';">Time</code> object. With the if statement we check
    if one of them has no value. This can happen if the user didn't type a name for example. Therefor we need this
    <code style="font-family:'Consolas';">Boolean</code>. We are going to ask in the HTML later if it's true or false
    and print a message complete the
    form. But first we need to initialize it in <b>lecture-add.component.ts</b>.</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">fieldsEmpty</span><span style="color:#008000;">: </span><span style="color:#ff4848;">Boolean </span><span style="color:#008000;">= </span><span style="color:#359aff;">false</span><span style="color:#b16565;">;</span></pre>
  </div>
  <p>The rest of the function you should already recognize. We use the function from the service and subscibe it. With
    <code style="font-family:'Consolas';">push</code> we add it to the array.</p>
  <p>Last step is to complete the <b>lecture-add.component.html</b>.</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;button </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui primary button&quot; (click)</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;add(
  lectureName.value,
  lectureBuilding.value,
  lectureFloor.value,
  lectureRoom.value,
  lectureDay.value,
  lectureHours.value,
  lectureMinutes.value,
  lectureDepartment.value)&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Add
</span><span style="color:#359aff;">&lt;/button&gt;
&lt;p </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;color:red&quot; *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;fieldsEmpty</span><span style="color:#ff4848;">==</span><span style="color:#ffffff;">true&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Please check 
  again, if you filled all input fields correctly!</span><span style="color:#359aff;">&lt;/p&gt;
</span><span style="color:#359aff;">&lt;button </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui button&quot; (click)</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;goBack()&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Go Back</span><span style="color:#359aff;">&lt;/button&gt;</span></pre>
  </div>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Delete Lectures</h4>
  <p>Same procedure again. Prepare a function in <b>lecture-service.ts</b>.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">deleteLecture</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture </span><span style="color:#008000;">| </span><span style="color:#ff8000;">number </span><span style="color:#b16565;">)</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Observable&lt;Lecture&gt; </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">const </span><span style="color:#ff8000;">id </span><span style="color:#008000;">= </span><span style="color:#008000;">typeof</span><span style="color:#ffffff;"> lecture </span><span style="color:#008000;">=== </span><span style="color:#ffff80;">&#39;number&#39; </span><span style="color:#008000;">?</span><span style="color:#ffffff;"> lecture </span><span style="color:#008000;">:</span><span style="color:#ffffff;"> lecture.</span><span style="color:#ff8000;">id</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">const</span><span style="color:#ffffff;"> url </span><span style="color:#008000;">=</span><span style="color:#ffffff;"> `$</span><span style="color:#b16565;">&#123;</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureUrl</span><span style="color:#b16565;">&#125;</span><span style="color:#008000;">/$</span><span style="color:#b16565;">&#123;</span><span style="color:#ff8000;">id</span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;">`</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">return </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.http.</span><span style="color:#359aff;">delete</span><span style="color:#ffffff;">&lt;Lecture&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">url</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> httpOptions</span><span style="color:#b16565;">)
  </span><span style="color:#ffffff;">  .pipe</span><span style="color:#b16565;">(
  </span><span style="color:#ffffff;">  catchError</span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.handleError&lt;Lecture&gt;</span><span style="color:#b16565;">(</span><span style="color:#ffff80;">&#39;deleteLecture&#39;</span><span style="color:#b16565;">))
  </span><span style="color:#b16565;">);
&#125;</span></pre>

  </div>
  <p>Use it in <b>timetable.component.ts</b>:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">delete</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#b16565;">)</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures </span><span style="color:#008000;">= </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures.filter</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">l </span><span style="color:#008000;">=&gt;</span><span style="color:#ffffff;"> l </span><span style="color:#008000;">!==</span><span style="color:#ffffff;"> lecture</span><span style="color:#b16565;">);
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureService.deleteLecture</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#b16565;">)</span><span style="color:#ffffff;">.subscribe</span><span style="color:#b16565;">();
&#125;</span></pre>
  </div>
  <p>And there should be a function to delete all lectures with one click:</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">deleteAll</span><span style="color:#b16565;">()</span><span style="color:#008000;">:</span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">for</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">let lecture of </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.</span><span style="color:#359aff;">delete</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#b16565;">);
  </span><span style="color:#b16565;">&#125;
&#125;</span></pre>
  </div>
  <p>Since we provided the functions, we can add them to new buttons now. We just need to keep them in a
    <code style="font-family:'Consolas';">div</code>
    to check if the <code style="font-family:'Consolas';">lectures</code> already have data, otherwise we will have a
    timing problem at this point.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;lectures&quot;</span><span style="color:#359aff;">&gt;
</span><span style="color:#359aff;">  &lt;button </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui primary button&quot;
  routerLink</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;/lecture-add&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Add Lecture</span><span style="color:#359aff;">&lt;/button&gt;
</span><span style="color:#359aff;">  &lt;button </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui button&quot; (click)</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;deleteAll()&quot;
  *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;lectures.length&gt;</span><span style="color:#00ff40;">0</span><span style="color:#ffffff;">&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Delete All</span><span style="color:#359aff;">&lt;/button&gt;
  </span><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;lectures.length&gt;</span><span style="color:#00ff40;">0</span><span style="color:#ffffff;">&quot; </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;padding: </span><span style="color:#00ff40;">15px</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;">&quot;</span><span style="color:#359aff;">&gt;
    </span><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui middle aligned divided list&quot;</span><span style="color:#359aff;">&gt;
      </span><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngFor</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;let l of lectures&quot; </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;item&quot;</span><span style="color:#359aff;">&gt;
        </span><span style="color:#359aff;">&lt;a </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;app-lecture-item item&quot; [lecture]</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;l&quot;
          routerLink</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;/lecture-details/<span>{{</span>l.id<span>}}</span>&quot;
        </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;margin: </span><span style="color:#00ff40;">10px</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;"> padding:</span><span style="color:#00ff40;">10px</span><span style="color:#ffffff;">&quot;</span><span style="color:#359aff;">&gt;&lt;/a&gt;
</span><span style="color:#359aff;">        &lt;button (click)</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;delete(l)&quot; </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui button&quot;</span><span style="color:#359aff;">&gt;</span><span style="color:#ffffff;">Delete</span><span style="color:#359aff;">&lt;/button&gt;
      </span><span style="color:#359aff;">&lt;/div&gt;
    </span><span style="color:#359aff;">&lt;/div&gt;
  </span><span style="color:#359aff;">&lt;/div&gt;

  </span><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;lectures.length</span><span style="color:#ff4848;">==</span><span style="color:#00ff40;">0</span><span style="color:#ffffff;">&quot; </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;padding: </span><span style="color:#00ff40;">15px</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;">&quot;</span><span style="color:#359aff;">&gt;
    </span><span style="color:#359aff;">&lt;p&gt;</span><span style="color:#ffffff;">No Items in the Timetable!</span><span style="color:#359aff;">&lt;/p&gt;
  </span><span style="color:#359aff;">&lt;/div&gt;
&lt;/div&gt;</span></pre>
  </div>
  <p>Now that we have all functions we wanted to edit the timetable, we are ready to finalize the application. </p>

  <h4>Visualization of the Construction:</h4>
  <p><img class="ui image big centered" src="assets/img/App-Building-9.png"></p>
  <div class="ui success message">
    <h4>Summary</h4>
    <ul>
      <li>You learned about http, http-module and observables</li>
      <li>You added all dependendcies to use HTTP</li>
      <li>You refactored the service to load data from a web API</li>
      <li>You configured the In-Memory Web API</li>
      <li>You learned about the methods <code style="font-family: 'Consolas';">post()</code>, <code
          style="font-family: 'Consolas';">put()</code> and <code style="font-family: 'Consolas';">delete()</code>
      and applied them</li>
      <li>You added the functions add, edit, delete and delete all to the application</li>
    </ul>
  </div>
  <iframe style="margin-top:20px; width:100%; height: 500px"
    src="https://stackblitz.com/edit/where-to-go-step-7?embed=1&file=src/app/timetable/timetable.component.ts&hideNavigation=1"></iframe>
</div>