<h2>Finish the Application</h2>
<div *ngIf="praxis" style="margin-top: 20px;" class="ui info message">
  <h5>User Story</h5>
  <p>As a <b>user</b><br />
    I want to <b>display the very next lecture on the front page</b>, <br />
    to <b> see immediately where to go next when I open the app</b>.</p>
</div>
<div *ngIf="theoryLarge" style="margin-top: 20px;">
  <p>This chapter doesn't contain any more theory learning units.</p>
</div>
<div *ngIf="praxis" style="margin-top: 20px;">
  <h4>Start page</h4>
  <p>There is still one page empty: the start page. On this page we want to see our next lecture and only the next one
    of the day. So first we need to prepare the <b>where-to-go.component.ts</b>. We are going to need the
    <code style="font-family:'Consolas';">LectureService</code>
    injected in the <code style="font-family:'Consolas';">constructor</code> again.</p>

  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ff8000;">constructor</span><span style="color:#b16565;">(</span><span style="color:#359aff;">private</span><span style="color:#ffffff;"> lectureService</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> LectureService</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123; </span><span style="color:#b16565;">&#125;</span></pre>
  </div>
  <p>Of course we also need to import the class <code style="font-family:'Consolas';">Lecture</code>.</p>
  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> LectureService </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;../shared/lecture.service&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>

  <p>Then we need the <code style="font-family:'Consolas';">Date</code> of today. This <code
      style="font-family:'Consolas';">Date</code> will tell us all we need to know: the day of
    the week and the time, because we want to compare the day and time of today with the day and time of the lectures
    in the timetable to find the very next lecture to display. We need an array of <code
      style="font-family:'Consolas';">Lecture[]</code>, a
    <code style="font-family:'Consolas';">Lecture</code> variable to save the next lecture with, a <code
      style="font-family:'Consolas';">Boolean</code> that will save if there still
    is a lecture today and a <code style="font-family:'Consolas';">Lecture</code> object with initialised start values.
    We will need this to compare all objects in the timetable with this <code style="font-family:'Consolas';">Lecture</code> object and we
    overwrite it every time, a lecture is closer to the time right now than the saved lecture before.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">lecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#008000;">[]</span><span style="color:#b16565;">;
</span><span style="color:#ffffff;">nextLecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture</span><span style="color:#b16565;">;
</span><span style="color:#ffffff;">localTime</span><span style="color:#008000;">: </span><span style="color:#ff4848;">Date </span><span style="color:#008000;">= </span><span style="color:#008000;">new </span><span style="color:#ff4848;">Date</span><span style="color:#b16565;">();
</span><span style="color:#ffffff;">isThereANextLecture</span><span style="color:#008000;">: </span><span style="color:#ff4848;">Boolean </span><span style="color:#008000;">= </span><span style="color:#359aff;">false</span><span style="color:#b16565;">;
</span><span style="color:#ffffff;">tempLecture</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> Lecture </span><span style="color:#008000;">= </span><span style="color:#b16565;">&#123;
  </span><span style="color:#ffffff;">id</span><span style="color:#008000;">: </span><span style="color:#00ff40;">99</span><span style="color:#b16565;">,
  </span><span style="color:#ffffff;">name</span><span style="color:#008000;">: </span><span style="color:#ffff80;">&#39;Dummy&#39;</span><span style="color:#b16565;">,
</span><span style="color:#ffffff;">  room</span><span style="color:#008000;">: </span><span style="color:#ffff80;">&#39;0&#39;</span><span style="color:#b16565;">,
</span><span style="color:#ffffff;">  day</span><span style="color:#008000;">: </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.getWeekday</span><span style="color:#b16565;">(),
</span><span style="color:#ffffff;">  time</span><span style="color:#008000;">: </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> hours</span><span style="color:#008000;">: </span><span style="color:#00ff40;">20</span><span style="color:#b16565;">,</span><span style="color:#ffffff;"> minutes</span><span style="color:#008000;">: </span><span style="color:#00ff40;">15 </span><span style="color:#b16565;">&#125;,
</span><span style="color:#ffffff;">  building</span><span style="color:#008000;">:</span><span style="color:#ffff80;">&#39;WE5&#39;</span><span style="color:#b16565;">,
  </span><span style="color:#ffffff;">floor</span><span style="color:#008000;">: </span><span style="color:#ffff80;">&#39;0&#39;
</span><span style="color:#b16565;">&#125;;</span></pre>
  </div>
  <p>Of course we also need to import the class <code style="font-family:'Consolas';">Lecture</code>.</p>
  <div class="ui message black">
    <pre
      style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">import </span><span style="color:#b16565;">&#123;</span><span style="color:#ffffff;"> Lecture </span><span style="color:#b16565;">&#125;</span><span style="color:#ffffff;"> from </span><span style="color:#ffff80;">&#39;./lecture&#39;</span><span style="color:#b16565;">;</span></pre>
  </div>

  <p>We will also have the <code style="font-family:'Consolas';">getLectures()</code> method that we call in <code
      style="font-family:'Consolas';">ngOnInit()</code>.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">ngOnInit</span><span style="color:#b16565;">() </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.getLectures</span><span style="color:#b16565;">();
&#125;

</span><span style="color:#ffffff;">getLectures</span><span style="color:#b16565;">()</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectureService.getLectures</span><span style="color:#b16565;">()
</span><span style="color:#ffffff;">  .subscribe</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lectures </span><span style="color:#008000;">=&gt; </span><span style="color:#b16565;">&#123; </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures </span><span style="color:#008000;">=</span><span style="color:#ffffff;"> lectures</span><span style="color:#b16565;">; </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.getNextLecture</span><span style="color:#b16565;">() </span><span style="color:#b16565;">&#125;);
&#125;</span></pre>
  </div>
  <p>With the method <code style="font-family:'Consolas';">getDay()</code> we will get the weekday of today as a number.
    0 is sunday, 1 is monday and
    so on. But we need them as strings. We pick the one string from an array of strings whose index is the same
    number as todays number.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">getWeekday</span><span style="color:#b16565;">()</span><span style="color:#008000;">:</span><span style="color:#ffffff;"> string </span><span style="color:#b16565;">&#123;
  </span><span style="color:#359aff;">var</span><span style="color:#ffffff;"> days </span><span style="color:#008000;">= </span><span style="color:#008000;">[</span><span style="color:#ffff80;">&#39;Sunday&#39;</span><span style="color:#b16565;">, </span><span style="color:#ffff80;">&#39;Monday&#39;</span><span style="color:#b16565;">, </span><span style="color:#ffff80;">&#39;Tuesday&#39;</span><span style="color:#b16565;">, 
  </span><span style="color:#ffff80;">&#39;Wednesday&#39;</span><span style="color:#b16565;">, </span><span style="color:#ffff80;">&#39;Thursday&#39;</span><span style="color:#b16565;">, </span><span style="color:#ffff80;">&#39;Friday&#39;</span><span style="color:#b16565;">, </span><span style="color:#ffff80;">&#39;Saturday&#39;</span><span style="color:#008000;">]</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">return</span><span style="color:#ffffff;"> days</span><span style="color:#008000;">[</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.localTime.</span><span style="color:#ff8000;">getDay</span><span style="color:#b16565;">()</span><span style="color:#008000;">]</span><span style="color:#b16565;">;
&#125;</span></pre>
  </div>
  <p>Now it's time for the function, that will return the correct next lecture for us.</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#ffffff;">getNextLecture</span><span style="color:#b16565;">()</span><span style="color:#008000;">: </span><span style="color:#359aff;">void </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">  let tempArray</span><span style="color:#008000;">: </span><span style="color:#ff4848;">Array</span><span style="color:#ffffff;">&lt;Lecture&gt; </span><span style="color:#008000;">= </span><span style="color:#008000;">[]</span><span style="color:#b16565;">;
  </span><span style="color:#359aff;">for </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">let lecture of </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.lectures</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
    </span><span style="color:#359aff;">if </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture.day </span><span style="color:#008000;">=== </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.getWeekday</span><span style="color:#b16565;">()) </span><span style="color:#b16565;">&#123;
      </span><span style="color:#359aff;">if </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture.time.hours </span><span style="color:#008000;">&gt;= </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.localTime.</span><span style="color:#ff8000;">getHours</span><span style="color:#b16565;">()) </span><span style="color:#b16565;">&#123;
</span><span style="color:#ffffff;">        tempArray.</span><span style="color:#ff8000;">push</span><span style="color:#b16565;">(</span><span style="color:#ffffff;">lecture</span><span style="color:#b16565;">);
      </span><span style="color:#b16565;">&#125;
    </span><span style="color:#b16565;">&#125;
    </span><span style="color:#359aff;">for </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">let t of tempArray</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
      </span><span style="color:#359aff;">if </span><span style="color:#b16565;">(</span><span style="color:#ffffff;">t.time.hours </span><span style="color:#008000;">&lt; </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.tempLecture.time.hours</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
        </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.tempLecture </span><span style="color:#008000;">=</span><span style="color:#ffffff;"> t</span><span style="color:#b16565;">;
        </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.isThereANextLecture </span><span style="color:#008000;">= </span><span style="color:#359aff;">true</span><span style="color:#b16565;">;
      </span><span style="color:#b16565;">&#125;
    </span><span style="color:#b16565;">&#125;
    </span><span style="color:#359aff;">if </span><span style="color:#b16565;">(</span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.isThereANextLecture</span><span style="color:#b16565;">) </span><span style="color:#b16565;">&#123;
      </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.nextLecture </span><span style="color:#008000;">= </span><span style="color:#359aff;">this</span><span style="color:#ffffff;">.tempLecture</span><span style="color:#b16565;">;
    </span><span style="color:#b16565;">&#125;
  </span><span style="color:#b16565;">&#125;
&#125;</span></pre>
  </div>
  <p>There is an empty array, we go through all lectures in the lecture array and if the day is today, we check if the
    hour is greater than or equal with the hour right now. If so we put this lecture in the prepared array. In the
    second step the function compares all lectures in the <code style="font-family:'Consolas';">tempArray</code> with
    each other and saves the smallest
    one, which means the one that is closest to the time right now and sets the boolean <code
      style="font-family:'Consolas';">true</code>. We could do
    the same thing with the minutes, but you can't be at two lectures at the same time, so this is fine now.</p>
  <p>The last step is to display it via the HTML code. If we have a <code
      style="font-family:'Consolas';">nextLecture</code>, we want to see the
    <code style="font-family:'Consolas';">nextLecture</code>s' building, floor, room, day,time and name. If there is no
    <code style="font-family:'Consolas';">nextLecture</code>, we
    want to display the text "No events today!"</p>

  <div class="ui message black">
    <pre style="font-family:'Consolas'; font-size:10pt; color:#ffffff;  "><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;margin: </span><span style="color:#00ff40;">30px</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;">&quot;</span><span style="color:#359aff;">&gt;
  </span><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;nextLecture&quot; </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui info message&quot;
    </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;width: </span><span style="color:#00ff40;">50</span><span style="color:#ffffff;">%</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;"> margin-left: </span><span style="color:#00ff40;">25</span><span style="color:#ffffff;">%&quot;</span><span style="color:#359aff;">&gt;
    </span><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;header&quot;</span><span style="color:#359aff;">&gt;
  </span><span style="color:#ffffff;">      You need to be in
    </span><span style="color:#359aff;">&lt;/div&gt;
    </span><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;header&quot;</span><span style="color:#359aff;">&gt;
  </span><span style="color:#ffffff;">      <span>{{</span>nextLecture.building<span>}}</span>/<span>{{</span>nextLecture.floor<span>}}</span>
      .<span>{{</span>nextLecture.room<span>}}</span>
    </span><span style="color:#359aff;">&lt;/div&gt;
    </span><span style="color:#359aff;">&lt;div </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;text-align: center</span><span style="color:#ff8000;">;
  </span><span style="color:#ffffff;">      list-style-type: none</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;">&quot; </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;list&quot;</span><span style="color:#359aff;">&gt;
      </span><span style="color:#359aff;">&lt;p&gt;</span><span style="color:#ffffff;">At <span>{{</span>nextLecture.day<span>}}</span>, <span>{{</span>nextLecture.time.hours<span>}}</span>
      :<span>{{</span>nextLecture.time.minutes<span>}}</span></span><span style="color:#359aff;">&lt;/p&gt;
      </span><span style="color:#359aff;">&lt;p&gt;</span><span style="color:#ffffff;">For <span>{{</span>nextLecture.name<span>}}</span></span><span style="color:#359aff;">&lt;/p&gt;
    </span><span style="color:#359aff;">&lt;/div&gt;
  </span><span style="color:#359aff;">&lt;/div&gt;
  </span><span style="color:#359aff;">&lt;div</span><span style="color:#ffffff;"> *ngIf</span><span style="color:#ff4848;">=</span><span style="color:#ffffff;">&quot;!nextLecture&quot; </span><span style="color:#ff4848;">class=</span><span style="color:#ffffff;">&quot;ui info message&quot;
    </span><span style="color:#ff4848;">style=</span><span style="color:#ffffff;">&quot;width: </span><span style="color:#00ff40;">50</span><span style="color:#ffffff;">%</span><span style="color:#ff8000;">;</span><span style="color:#ffffff;"> margin-left: </span><span style="color:#00ff40;">25</span><span style="color:#ffffff;">%&quot;</span><span style="color:#359aff;">&gt;
  </span><span style="color:#ffffff;">    No events today!
  </span><span style="color:#359aff;">&lt;/div&gt;
&lt;/div&gt;</span></pre>
  </div>
  <h4>Visualization of the Construction:</h4>
  (No changes here)
  <p><img class="ui image big centered" src="assets/img/App-Building-9.png"></p>
  <div class="ui success message">
    <h4>Summary</h4>
    <ul>
      <li>Nothing in this chapter should be new for you.</li>
      <li>You displayed the next lecture of the day on the start page of the application.</li>
      <li>You have learned alot, be proud of yourself!</li>
    </ul>
  </div>
  <h4>Congratulations! This is your result:</h4>
  <iframe style="margin-top:20px; margin-bottom:20px; width:100%; height: 500px"
    src="https://stackblitz.com/edit/where-to-go-step-8?embed=1&file=src/app/where-to-go/where-to-go.component.ts&hideNavigation=1"></iframe>

  <div class="ui center aligned segment" style="width: 50%; margin: 0 auto">
    <h4>Your Progress:</h4>
    <mat-progress-bar style="margin-bottom:20px;" mode="determinate" value="100"></mat-progress-bar>
  </div>

</div>